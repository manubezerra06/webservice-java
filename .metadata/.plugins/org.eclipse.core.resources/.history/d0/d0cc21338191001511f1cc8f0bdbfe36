package br.edu.qi.loader;

import java.util.Date;
import java.util.HashSet;
import java.util.Set;

import br.edu.qi.core.dao.Dao;
import br.edu.qi.core.model.Adocao;
import br.edu.qi.core.model.Animal;
import br.edu.qi.core.model.Instituicao;
import br.edu.qi.core.model.Pessoa;
import br.edu.qi.loader.dto.AdocaoDto;
import br.edu.qi.loader.dto.AnimalDto;
import br.edu.qi.loader.dto.AnuncioDto;
import br.edu.qi.loader.dto.InstituicaoDto;
import br.edu.qi.loader.dto.PessoaDto;
import br.edu.qi.loader.dto.UsuarioDto;
import br.edu.qi.loader.dto.XmlModel;

public class Parser {

	Dao dao = new Dao();

	public void parse(XmlModel model) {

		if (model == null)
			return;

		for (AdocaoDto adocao : model.getAdocoes()) {

			Instituicao instituicao = dao.retornarPorId(Instituicao.class, adocao.getCodInstituicao());
			Pessoa pessoa = dao.retornarPorId(Pessoa.class, adocao.getCodPessoa());

			Date date = adocao.getDate();

			Set<Animal> animais = new HashSet<Animal>(0);

			for (int codAnimal : adocao.getCodAnimais()) {

				Animal a = dao.retornarPorId(Animal.class, codAnimal);

				animais.add(a);
			}

			Adocao a = new Adocao(instituicao, pessoa, date, animais);
			
			dao.salvar(a);
		}

		for (AnimalDto animal : model.getAnimais()) {

			
			
		}

		for (AnuncioDto anuncio : model.getAnuncios()) {

		}

		for (InstituicaoDto instituicao : model.getInstituicoes()) {

		}

		for (PessoaDto pessoa : model.getPessoas()) {

		}

		for (UsuarioDto usuario : model.getUsuarios()) {

		}

	}

}
